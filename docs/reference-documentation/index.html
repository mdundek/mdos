
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mdundek.github.io/mdos/reference-documentation/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.6">
    
    
      
        <title>Reference Documentation - MDos</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mdos-application-reference-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="MDos" class="md-header__button md-logo" aria-label="MDos" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MDos
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Reference Documentation
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mdundek/mdos" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../installation/" class="md-tabs__link">
      Install
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../getting-started/" class="md-tabs__link">
      Getting Started
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Reference Documentation
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../advanced-resources/" class="md-tabs__link">
      Advanced Resources
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="MDos" class="md-nav__button md-logo" aria-label="MDos" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    MDos
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mdundek/mdos" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Install
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Reference Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Reference Documentation
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#anatomy-of-an-application" class="md-nav__link">
    Anatomy of an application
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manifest-file-mdosyaml" class="md-nav__link">
    Manifest file: mdos.yaml
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application" class="md-nav__link">
    Application
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-component" class="md-nav__link">
    Application component
  </a>
  
    <nav class="md-nav" aria-label="Application component">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#registries" class="md-nav__link">
     Registries
  </a>
  
    <nav class="md-nav" aria-label=" Registries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-the-mdos-registry" class="md-nav__link">
     Use the MDos registry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-custom-registry" class="md-nav__link">
     Use a custom registry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-public-registry" class="md-nav__link">
     Use a public registry
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-image-builds-on-deploy" class="md-nav__link">
     Disable image builds on deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overwrite-container-default-command-on-start" class="md-nav__link">
     Overwrite container default command on start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persisted-volumes" class="md-nav__link">
     Persisted Volumes
  </a>
  
    <nav class="md-nav" aria-label=" Persisted Volumes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#standard-volumes" class="md-nav__link">
     Standard volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shared-volumes" class="md-nav__link">
     Shared volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-populate-volumes" class="md-nav__link">
     Pre-populate volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hostpath-mounts" class="md-nav__link">
     HostPath mounts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readonly-volumes-files" class="md-nav__link">
     ReadOnly volumes &amp; files
  </a>
  
    <nav class="md-nav" aria-label=" ReadOnly volumes &amp; files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-secrets" class="md-nav__link">
     Using Secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-configmaps" class="md-nav__link">
     Using ConfigMaps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-existing-configmap-or-secret" class="md-nav__link">
     From existing ConfigMap or Secret
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
     Environment Variables
  </a>
  
    <nav class="md-nav" aria-label=" Environment Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-configmaps-or-secrets" class="md-nav__link">
     Using ConfigMaps or Secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-existing-configmap-or-secret_1" class="md-nav__link">
     From existing ConfigMap or Secret
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networking" class="md-nav__link">
     Networking
  </a>
  
    <nav class="md-nav" aria-label=" Networking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exposing-ports-using-services" class="md-nav__link">
     Exposing ports using services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-ingress" class="md-nav__link">
     Configure Ingress
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networkpolicy" class="md-nav__link">
     NetworkPolicy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#component-dependencies" class="md-nav__link">
     Component dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oauth2-oidc" class="md-nav__link">
     OAuth2 OIDC
  </a>
  
    <nav class="md-nav" aria-label=" OAuth2 OIDC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#protect-your-ingress-with-a-oidc-provider" class="md-nav__link">
     Protect your ingress with a OIDC provider
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-pod-resources" class="md-nav__link">
     Set pod resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execute-pre-build-commands" class="md-nav__link">
     Execute pre-build commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../advanced-resources/" class="md-nav__link">
        Advanced Resources
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#anatomy-of-an-application" class="md-nav__link">
    Anatomy of an application
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manifest-file-mdosyaml" class="md-nav__link">
    Manifest file: mdos.yaml
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application" class="md-nav__link">
    Application
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-component" class="md-nav__link">
    Application component
  </a>
  
    <nav class="md-nav" aria-label="Application component">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#registries" class="md-nav__link">
     Registries
  </a>
  
    <nav class="md-nav" aria-label=" Registries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-the-mdos-registry" class="md-nav__link">
     Use the MDos registry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-custom-registry" class="md-nav__link">
     Use a custom registry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-public-registry" class="md-nav__link">
     Use a public registry
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-image-builds-on-deploy" class="md-nav__link">
     Disable image builds on deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overwrite-container-default-command-on-start" class="md-nav__link">
     Overwrite container default command on start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persisted-volumes" class="md-nav__link">
     Persisted Volumes
  </a>
  
    <nav class="md-nav" aria-label=" Persisted Volumes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#standard-volumes" class="md-nav__link">
     Standard volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shared-volumes" class="md-nav__link">
     Shared volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-populate-volumes" class="md-nav__link">
     Pre-populate volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hostpath-mounts" class="md-nav__link">
     HostPath mounts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readonly-volumes-files" class="md-nav__link">
     ReadOnly volumes &amp; files
  </a>
  
    <nav class="md-nav" aria-label=" ReadOnly volumes &amp; files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-secrets" class="md-nav__link">
     Using Secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-configmaps" class="md-nav__link">
     Using ConfigMaps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-existing-configmap-or-secret" class="md-nav__link">
     From existing ConfigMap or Secret
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
     Environment Variables
  </a>
  
    <nav class="md-nav" aria-label=" Environment Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-configmaps-or-secrets" class="md-nav__link">
     Using ConfigMaps or Secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-existing-configmap-or-secret_1" class="md-nav__link">
     From existing ConfigMap or Secret
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networking" class="md-nav__link">
     Networking
  </a>
  
    <nav class="md-nav" aria-label=" Networking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exposing-ports-using-services" class="md-nav__link">
     Exposing ports using services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-ingress" class="md-nav__link">
     Configure Ingress
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networkpolicy" class="md-nav__link">
     NetworkPolicy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#component-dependencies" class="md-nav__link">
     Component dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oauth2-oidc" class="md-nav__link">
     OAuth2 OIDC
  </a>
  
    <nav class="md-nav" aria-label=" OAuth2 OIDC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#protect-your-ingress-with-a-oidc-provider" class="md-nav__link">
     Protect your ingress with a OIDC provider
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-pod-resources" class="md-nav__link">
     Set pod resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execute-pre-build-commands" class="md-nav__link">
     Execute pre-build commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/mdundek/mdos/edit/master/docs/reference-documentation.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="mdos-application-reference-documentation">MDos application reference documentation</h1>
<h2 id="anatomy-of-an-application">Anatomy of an application</h2>
<p><img align="right" alt="Anatomy" src="/mdos/img/anatomy.png" />
Applications are to be seen as a higher level concept, an application in <code>mdos</code> is composed of one or more application components. Application components are your actual project asset placeholders (source code), where one component could be an API backend server for instance, and a second component would hold your front end application and so on.<br />
Every application component can have one or more volumes attached to it for storage persistance &amp; data mirroring. </p>
<p>This architecture allows you to compose complex applications to suit your needs.</p>
<p>A MDos application project layout is composed of one or more folders, each one representing an application component.<br />
At the root of the application folder is a <code>mdos.Please Noteyaml</code> file that holds all runtime configuration parameters for the application and it's components:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">MDos managed cluster</label><label for="__tabbed_1_2">MDos framework only</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Project structure</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>my-application/
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>├── backend
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>│   └── Dockerfile
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>│   └── &lt;your application code files&gt;...
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>├── frontend
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>│   └── Dockerfile
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>│   └── &lt;your application code files&gt;...
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>├── volumes
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>│   └── static-website
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>│       └── index.html
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>│       └── ...
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>└── mdos.yaml
</code></pre></div>
<p>In this example we have an application named <code>my-application</code>, that is composed of two distinct application components: <code>backend</code> &amp; <code>frontend</code>.<br />
Each component has it's own Dockerfile.<br />
At the <code>application</code> level, there is also a <code>volumes</code> folder where you can store application component volume files to be used within your application, and a <code>mdos.yaml</code> config file that holds all runtime configuration parameters. As an example, here the <code>volumes</code> folder has a subfolder called <code>static-website</code> that is used by the <code>frontend</code> application so serve it's website data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Volumes are managed on the <code>application</code> level rather than on the <code>component</code> level in case you wish to share volumes amongst components.</p>
</div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Project structure</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>my-application/
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>├── backend
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>│   └── Dockerfile
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>│   └── &lt;your application code files&gt;...
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>├── frontend
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>│   └── Dockerfile
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>│   └── &lt;your application code files&gt;...
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>└── mdos.yaml
</code></pre></div>
<p>In this example we have an application named <code>my-application</code>, that is composed of two distinct application components: <code>backend</code> &amp; <code>frontend</code>.<br />
Each component has it's own Dockerfile.<br />
At the <code>application</code> level, there is also a <code>mdos.yaml</code> config file that holds all runtime configuration parameters.</p>
</div>
</div>
</div>
<hr />
<h2 id="manifest-file-mdosyaml">Manifest file: mdos.yaml</h2>
<p>Each application is configured in a YAML file at the root of the application folder. This is the equivalent of your lower level Kubernetes yaml files, but all concatenated into a single, higher level configuration file that greatly abstracts away the complexity of Kubernetes deployment.  </p>
<p>We will now have a closer look at what you can configure in your application <code>mdos.yaml</code> file.</p>
<h2 id="application">Application</h2>
<p>Each <code>mdos.yaml</code> file starts with global configuration parameters specific to this application:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span>
<span class="normal"><a href="#__codelineno-2-4">4</a></span>
<span class="normal"><a href="#__codelineno-2-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="nt">schemaVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">tenantName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-team</span><span class="w"></span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="nt">appName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-application</span><span class="w"></span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="nt">uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">XA74S-FXCDI</span><span class="w"></span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="nt">components</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>The <code>tenant-name</code> field maps directly to a kubernetes target <code>namespace</code>.<br />
The <code>uuid</code> field is a unique identifier for this application, all dependant resources that this application will create and manage will be tied to this application <code>uuid</code>. </p>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos generate application</strong></p>
</div>
<hr />
<h2 id="application-component">Application component</h2>
<p>Each application component will translate to a specific deployment on the cluster. Just like an application, a <code>component</code> has some base values that need to be set:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-comp-1-img-name</span><span class="w"></span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span><span class="w"></span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">    </span><span class="nt">uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">E5PLU-TQMBD</span><span class="w"></span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-2</span><span class="w"></span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-comp-2-img-name</span><span class="w"></span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span><span class="w"></span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">    </span><span class="nt">uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HUJKG-GDGHN</span><span class="w"></span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>Among those, you will define your component <code>name</code>, <code>image</code> name and image <code>tag</code> to use.</p>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos generate component</strong></p>
<p>When using the MDos CLI to scaffold your application component, then the CLI will ask you to select amongst multiple network isolation options. You can read more about <code>NetworkPolicy</code> isolation configurations in the section <a href="#networkpolicy">here</a></p>
</div>
<hr />
<h3 id="registries"><span class="twemoji section-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.47 4.97a.75.75 0 0 0 0 1.06L9.94 7.5 8.47 8.97a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06l-2-2a.75.75 0 0 0-1.06 0zM6.53 6.03a.75.75 0 0 0-1.06-1.06l-2 2a.75.75 0 0 0 0 1.06l2 2a.75.75 0 1 0 1.06-1.06L5.06 7.5l1.47-1.47z"/><path fill-rule="evenodd" d="M12.246 13.307a7.5 7.5 0 1 1 1.06-1.06l2.474 2.473a.75.75 0 1 1-1.06 1.06l-2.474-2.473zM1.5 7.5a6 6 0 1 1 10.386 4.094.75.75 0 0 0-.292.293A6 6 0 0 1 1.5 7.5z"/></svg></span> Registries</h3>
<p>Registries are where your MDos will push and pull your application images to/from. 
Multiple choices are available here.</p>
<h4 id="use-the-mdos-registry"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> Use the MDos registry</h4>
<div class="admonition error">
<p class="admonition-title">Please note</p>
<p>Only applicable for <code>MDos managed cluster</code> deployments</p>
</div>
<p>MDos comes with a private integrated Docker registry. If no <code>registry</code> parameter is set on your component <code>yaml</code> block, then this private internal registry will be used to push / pull the images from. No extra configuration parameters are required if this is the registry you want to use.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span>
<span class="normal"><a href="#__codelineno-4-6">6</a></span>
<span class="normal"><a href="#__codelineno-4-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-comp-1-img-name</span><span class="w"></span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span><span class="w"></span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<h4 id="use-a-custom-registry"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> Use a custom registry</h4>
<p>If you have your own private registry that you would like to use for your application images, you can do so by specifying a <code>registry</code> value on your component, along with an <strong>optionnal</strong> <code>imagePullSecrets</code> value that should be used to authenticate with your registry:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-comp-1-img-name</span><span class="w"></span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span><span class="w"></span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="hll"><span class="w">    </span><span class="nt">registry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my.private.registry</span><span class="w"></span>
</span><a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="hll"><span class="w">    </span><span class="nt">imagePullSecrets</span><span class="p">:</span><span class="w"> </span><span class="c1"># Optionnal</span><span class="w"></span>
</span><a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-registry-secret</span><span class="w"></span>
</span><a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since you are using your own private registry, it will be up to you to provision your private registry <code>Secret</code> on the target namespace.</p>
</div>
<h4 id="use-a-public-registry"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> Use a public registry</h4>
<p>The third option is to use a public registry, again with an <strong>optionnal</strong> <code>imagePullSecrets</code> value that should be used to authenticate with the public registry:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">MDos managed cluster</label><label for="__tabbed_2_2">MDos framework only</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span>
<span class="normal"><a href="#__codelineno-6-5">5</a></span>
<span class="normal"><a href="#__codelineno-6-6">6</a></span>
<span class="normal"><a href="#__codelineno-6-7">7</a></span>
<span class="normal"><a href="#__codelineno-6-8">8</a></span>
<span class="normal"><a href="#__codelineno-6-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-comp-1-img-name</span><span class="w"></span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span><span class="w"></span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="hll"><span class="w">    </span><span class="nt">publicRegistry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</span><a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">    </span><span class="nt">imagePullSecrets</span><span class="p">:</span><span class="w"> </span><span class="c1"># Optionnal</span><span class="w"></span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-registry-secret</span><span class="w"></span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span>
<span class="normal"><a href="#__codelineno-7-7">7</a></span>
<span class="normal"><a href="#__codelineno-7-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-comp-1-img-name</span><span class="w"></span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span><span class="w"></span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">    </span><span class="nt">imagePullSecrets</span><span class="p">:</span><span class="w"> </span><span class="c1"># Optionnal</span><span class="w"></span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-registry-secret</span><span class="w"></span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="disable-image-builds-on-deploy"><span class="twemoji section-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.47 4.97a.75.75 0 0 0 0 1.06L9.94 7.5 8.47 8.97a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06l-2-2a.75.75 0 0 0-1.06 0zM6.53 6.03a.75.75 0 0 0-1.06-1.06l-2 2a.75.75 0 0 0 0 1.06l2 2a.75.75 0 1 0 1.06-1.06L5.06 7.5l1.47-1.47z"/><path fill-rule="evenodd" d="M12.246 13.307a7.5 7.5 0 1 1 1.06-1.06l2.474 2.473a.75.75 0 1 1-1.06 1.06l-2.474-2.473zM1.5 7.5a6 6 0 1 1 10.386 4.094.75.75 0 0 0-.292.293A6 6 0 0 1 1.5 7.5z"/></svg></span> Disable image builds on deploy</h3>
<p>In some cases, you might not want to build your image when you deploy your applications using the command <code>mdos application deploy</code>. This could be the case if you use DevOps pipelines (GitHub Pipelines, Jenkins...) that already take care of building your images for you. In this case, simply add the flag <code>doNotBuild: true</code> to your component to disable this behavior for a given component:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span>
<span class="normal"><a href="#__codelineno-8-6">6</a></span>
<span class="normal"><a href="#__codelineno-8-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-comp-1-img-name</span><span class="w"></span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span><span class="w"></span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="hll"><span class="w">    </span><span class="nt">doNotBuild</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</span><a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As mentioned above, if you use this flag, make sure your images are present in the target registries before deploying.</p>
</div>
<hr />
<h3 id="overwrite-container-default-command-on-start"><span class="twemoji section-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.47 4.97a.75.75 0 0 0 0 1.06L9.94 7.5 8.47 8.97a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06l-2-2a.75.75 0 0 0-1.06 0zM6.53 6.03a.75.75 0 0 0-1.06-1.06l-2 2a.75.75 0 0 0 0 1.06l2 2a.75.75 0 1 0 1.06-1.06L5.06 7.5l1.47-1.47z"/><path fill-rule="evenodd" d="M12.246 13.307a7.5 7.5 0 1 1 1.06-1.06l2.474 2.473a.75.75 0 1 1-1.06 1.06l-2.474-2.473zM1.5 7.5a6 6 0 1 1 10.386 4.094.75.75 0 0 0-.292.293A6 6 0 0 1 1.5 7.5z"/></svg></span> Overwrite container default command on start</h3>
<p>If you wish to overwrite the <code>command</code> used by a container on startup, you can so so like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="hll"><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;sh&quot;</span><span class="w"></span>
</span><a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;-c&quot;</span><span class="w"></span>
</span><a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;mycommand&quot;</span><span class="w"></span>
</span><a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="hll"><span class="w">    </span><span class="nt">workingDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/from/this/dir</span><span class="w"> </span><span class="c1"># optional</span><span class="w"></span>
</span><a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>or along with command augments:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span>
<span class="normal"><a href="#__codelineno-10-5">5</a></span>
<span class="normal"><a href="#__codelineno-10-6">6</a></span>
<span class="normal"><a href="#__codelineno-10-7">7</a></span>
<span class="normal"><a href="#__codelineno-10-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="hll"><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;printenv&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
</span><a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="hll"><span class="w">    </span><span class="nt">commandArgs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;HOSTNAME&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;KUBERNETES_PORT&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
</span><a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="hll"><span class="w">    </span><span class="nt">workingDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/from/this/dir</span><span class="w"> </span><span class="c1"># optional</span><span class="w"></span>
</span><a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<hr />
<h3 id="persisted-volumes"><span class="twemoji section-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.47 4.97a.75.75 0 0 0 0 1.06L9.94 7.5 8.47 8.97a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06l-2-2a.75.75 0 0 0-1.06 0zM6.53 6.03a.75.75 0 0 0-1.06-1.06l-2 2a.75.75 0 0 0 0 1.06l2 2a.75.75 0 1 0 1.06-1.06L5.06 7.5l1.47-1.47z"/><path fill-rule="evenodd" d="M12.246 13.307a7.5 7.5 0 1 1 1.06-1.06l2.474 2.473a.75.75 0 1 1-1.06 1.06l-2.474-2.473zM1.5 7.5a6 6 0 1 1 10.386 4.094.75.75 0 0 0-.292.293A6 6 0 0 1 1.5 7.5z"/></svg></span> Persisted Volumes</h3>
<p>Volumes in Kubernetes come in all sorts and chapes. The most common one being the <code>Persisted Volume</code> to store your application data, but volumes can also be composed of files stored as ConfigMaps and Secrets, or a combination of both.<br />
Let's have a look at the various ways to use volumes in MDos.</p>
<h4 id="standard-volumes"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> Standard volumes</h4>
<p>This is the de-facto volume type, standard volumes are <code>PersistedVolumes</code> in Kubernetes, they start out empty (see them as a new partition that get's mounted onto your application environment) so that you can write data to it and ensure this data is persisted even on reboots, crashes...
Volumes are defined by a <code>name</code>, a <code>mountPath</code> that indicates where this volume partition needs to be mounted onto your application POD, and a <code>size</code> parameter to indicate what size this volume should have (size of the volume partition to be allocated).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span>
<span class="normal"><a href="#__codelineno-11-4">4</a></span>
<span class="normal"><a href="#__codelineno-11-5">5</a></span>
<span class="normal"><a href="#__codelineno-11-6">6</a></span>
<span class="normal"><a href="#__codelineno-11-7">7</a></span>
<span class="normal"><a href="#__codelineno-11-8">8</a></span>
<span class="normal"><a href="#__codelineno-11-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="hll"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database-storage</span><span class="w"></span>
</span><a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="hll"><span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/data/db</span><span class="w"></span>
</span><a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="hll"><span class="w">        </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10Gi</span><span class="w"></span>
</span><a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>The default <code>StorageClass</code> is based on the open source project <code>Longhorn</code>, a Block Storage solution that is very convenient and versatile.</p>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos generate volume</strong></p>
</div>
<h4 id="shared-volumes"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> Shared volumes</h4>
<div class="admonition error">
<p class="admonition-title">Please note</p>
<p>Only applicable for <code>MDos managed cluster</code> deployments</p>
</div>
<p>Shared volumes are NFS based volumes that can be shared amongst multiple application components. To use them, those volumes need to be created upfront using the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>mdos shared-volume create
</code></pre></div>
<p>Once this volume is created on the cluster, you can reference this volume in your application components:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span>
<span class="normal"><a href="#__codelineno-13-6">6</a></span>
<span class="normal"><a href="#__codelineno-13-7">7</a></span>
<span class="normal"><a href="#__codelineno-13-8">8</a></span>
<span class="normal"><a href="#__codelineno-13-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="hll"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database-storage</span><span class="w"></span>
</span><a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="hll"><span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/data/db</span><span class="w"></span>
</span><a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="hll"><span class="w">        </span><span class="nt">sharedVolumeName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-shared-volume</span><span class="w"> </span><span class="c1"># existing shared-volume</span><span class="w"></span>
</span><a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos shared-volume create</strong><br />
<strong>mdos generate volume</strong></p>
</div>
<h4 id="pre-populate-volumes"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> Pre-populate volumes</h4>
<div class="admonition error">
<p class="admonition-title">Please note</p>
<p>Only applicable for <code>MDos managed cluster</code> deployments</p>
</div>
<p>This MDos feature is designed to facilitate the way you can pre-populate files and folders into your volumes before your application starts up. This is useful when you wish to pre-load a database with a pre-defined dataset, or to deploy a static website for example.<br />
Your MDos project contains a <code>volumes</code> folder at the root, create a volume folder in there and store your static data in it. Then add the flag <code>syncVolume: true</code> to your volume config like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="hll"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">static-website</span><span class="w"></span>
</span><a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="hll"><span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/share/nginx/html</span><span class="w"></span>
</span><a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="hll"><span class="w">        </span><span class="nt">syncVolume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</span><a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="hll"><span class="w">        </span><span class="nt">trigger</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">initial</span><span class="w"> </span><span class="c1"># or &quot;always&quot;</span><span class="w"></span>
</span><a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="hll"><span class="w">        </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10Gi</span><span class="w"></span>
</span><a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<table>
<thead>
<tr>
<th><strong>"trigger" possible values</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>initial</td>
<td>Synchronize local volume content only if the POD target volume is empty (first deployment)</td>
</tr>
<tr>
<td>always</td>
<td>Synchronize local volume content every time this application is deployed</td>
</tr>
</tbody>
</table>
<p>Example volume folder structure in your MDos project folder:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Project structure</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span>
<span class="normal"><a href="#__codelineno-15-4">4</a></span>
<span class="normal"><a href="#__codelineno-15-5">5</a></span>
<span class="normal"><a href="#__codelineno-15-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a>...
<a id="__codelineno-15-2" name="__codelineno-15-2"></a>├── volumes
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="hll">│   └── static-website
</span><a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="hll">│       └── index.html
</span><a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="hll">│       └── ...
</span><a id="__codelineno-15-6" name="__codelineno-15-6"></a>└── mdos.yaml
</code></pre></div></td></tr></table></div>
<p>Then, when you deploy your application using the command <code>mdos application deploy</code>, this data will be synchronized with your application component volume before it starts.</p>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos generate volume</strong></p>
</div>
<h4 id="hostpath-mounts"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> HostPath mounts</h4>
<p>HostPath volumes do not use <code>PersistedVolumes</code>, they are direct mount points from the host file system with the application container. Those volume types are not recommended, they do not scale and are only recommended for debugging purposes.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span>
<span class="normal"><a href="#__codelineno-16-4">4</a></span>
<span class="normal"><a href="#__codelineno-16-5">5</a></span>
<span class="normal"><a href="#__codelineno-16-6">6</a></span>
<span class="normal"><a href="#__codelineno-16-7">7</a></span>
<span class="normal"><a href="#__codelineno-16-8">8</a></span>
<span class="normal"><a href="#__codelineno-16-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="hll"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database-storage</span><span class="w"></span>
</span><a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="hll"><span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/data/db</span><span class="w"></span>
</span><a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="hll"><span class="w">        </span><span class="nt">hostPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/folder/on/node</span><span class="w"></span>
</span><a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos generate volume</strong></p>
</div>
<hr />
<h3 id="readonly-volumes-files"><span class="twemoji section-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.47 4.97a.75.75 0 0 0 0 1.06L9.94 7.5 8.47 8.97a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06l-2-2a.75.75 0 0 0-1.06 0zM6.53 6.03a.75.75 0 0 0-1.06-1.06l-2 2a.75.75 0 0 0 0 1.06l2 2a.75.75 0 1 0 1.06-1.06L5.06 7.5l1.47-1.47z"/><path fill-rule="evenodd" d="M12.246 13.307a7.5 7.5 0 1 1 1.06-1.06l2.474 2.473a.75.75 0 1 1-1.06 1.06l-2.474-2.473zM1.5 7.5a6 6 0 1 1 10.386 4.094.75.75 0 0 0-.292.293A6 6 0 0 1 1.5 7.5z"/></svg></span> ReadOnly volumes &amp; files</h3>
<p>Read-only volumes are volumes that contain data such as certificates, scripts or any other type of files that your applications depend on to work.</p>
<h4 id="using-secrets"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> Using Secrets</h4>
<p>You can create and mount a Kubernetes <code>Secret</code> as a volume mount point using two different approaches:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Mount as directory</label><label for="__tabbed_3_2">Mount as files</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Here, your secret will be mounted as a directory, meaning that all values from your secret will be available as files inside your <code>mountPath</code> directory. </p>
<div class="admonition tip">
<p class="admonition-title">Changing secret values</p>
<p>This is a good approach if your <code>Secret</code> get's updated from time to time, this way of mounting Secrets in a Kubernetes ensures that those updated values are reflected back in the mounted files inside your PODs without restarting them.</p>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span>
<span class="normal"><a href="#__codelineno-17-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="hll"><span class="w">    </span><span class="nt">secrets</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-ca</span><span class="w"></span>
</span><a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="hll"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dir</span><span class="w"></span>
</span><a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="hll"><span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/x509/https</span><span class="w"></span>
</span><a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="hll"><span class="w">        </span><span class="nt">entries</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span><span class="w"></span>
</span><a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="hll"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span><span class="w"></span>
</span><a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="hll"><span class="w">              </span><span class="no">-----BEGIN CERTIFICATE-----</span><span class="w"></span>
</span><a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="hll"><span class="w">              </span><span class="no">...</span><span class="w"></span>
</span><a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="hll"><span class="w">              </span><span class="no">-----END CERTIFICATE-----</span><span class="w"></span>
</span><a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.key</span><span class="w"></span>
</span><a id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="hll"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span><span class="w"></span>
</span><a id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="hll"><span class="w">              </span><span class="no">-----BEGIN EC PRIVATE KEY-----</span><span class="w"></span>
</span><a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="hll"><span class="w">              </span><span class="no">...</span><span class="w"></span>
</span><a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="hll"><span class="w">              </span><span class="no">-----END EC PRIVATE KEY-----</span><span class="w"></span>
</span><a id="__codelineno-17-20" name="__codelineno-17-20"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<p>In this case, you can mount individual files from a Secret, rather than a whole secret.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-18-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-18-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-18-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-18-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-18-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-18-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span>
<span class="normal"><a href="#__codelineno-18-12">12</a></span>
<span class="normal"><a href="#__codelineno-18-13">13</a></span>
<span class="normal"><a href="#__codelineno-18-14">14</a></span>
<span class="normal"><a href="#__codelineno-18-15">15</a></span>
<span class="normal"><a href="#__codelineno-18-16">16</a></span>
<span class="normal"><a href="#__codelineno-18-17">17</a></span>
<span class="normal"><a href="#__codelineno-18-18">18</a></span>
<span class="normal"><a href="#__codelineno-18-19">19</a></span>
<span class="normal"><a href="#__codelineno-18-20">20</a></span>
<span class="normal"><a href="#__codelineno-18-21">21</a></span>
<span class="normal"><a href="#__codelineno-18-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="hll"><span class="w">    </span><span class="nt">secrets</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-ca</span><span class="w"></span>
</span><a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="hll"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file</span><span class="w"></span>
</span><a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="hll"><span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/x509/https</span><span class="w"></span>
</span><a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="hll"><span class="w">        </span><span class="nt">entries</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">client-ca</span><span class="w"></span>
</span><a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="hll"><span class="w">            </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span><span class="w"></span>
</span><a id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="hll"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span><span class="w"></span>
</span><a id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="hll"><span class="w">              </span><span class="no">-----BEGIN CERTIFICATE-----</span><span class="w"></span>
</span><a id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="hll"><span class="w">              </span><span class="no">...</span><span class="w"></span>
</span><a id="__codelineno-18-15" name="__codelineno-18-15"></a><span class="hll"><span class="w">              </span><span class="no">-----END CERTIFICATE-----</span><span class="w"></span>
</span><a id="__codelineno-18-16" name="__codelineno-18-16"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">client-key</span><span class="w"></span>
</span><a id="__codelineno-18-17" name="__codelineno-18-17"></a><span class="hll"><span class="w">            </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.key</span><span class="w"></span>
</span><a id="__codelineno-18-18" name="__codelineno-18-18"></a><span class="hll"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span><span class="w"></span>
</span><a id="__codelineno-18-19" name="__codelineno-18-19"></a><span class="hll"><span class="w">              </span><span class="no">-----BEGIN EC PRIVATE KEY-----</span><span class="w"></span>
</span><a id="__codelineno-18-20" name="__codelineno-18-20"></a><span class="hll"><span class="w">              </span><span class="no">...</span><span class="w"></span>
</span><a id="__codelineno-18-21" name="__codelineno-18-21"></a><span class="hll"><span class="w">              </span><span class="no">-----END EC PRIVATE KEY-----</span><span class="w"></span>
</span><a id="__codelineno-18-22" name="__codelineno-18-22"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos generate secret</strong></p>
</div>
<h4 id="using-configmaps"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> Using ConfigMaps</h4>
<p>You can create and mount a Kubernetes <code>ConfigMaps</code> as a volume mount point using two different approaches:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Mount as directory</label><label for="__tabbed_4_2">Mount as files</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Here, your secret will be mounted as a directory, meaning that all values from your ConfigMap will be available as files inside your <code>mountPath</code> directory. </p>
<div class="admonition tip">
<p class="admonition-title">Changing ConfigMap values</p>
<p>This is a good approach if your <code>ConfigMap</code> get's updated from time to time, this way of mounting ConfigMaps in a Kubernetes ensures that those updated values are reflected back in the mounted files inside your PODs without restarting them.</p>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span>
<span class="normal"><a href="#__codelineno-19-18">18</a></span>
<span class="normal"><a href="#__codelineno-19-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="hll"><span class="w">    </span><span class="nt">configs</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-ca</span><span class="w"></span>
</span><a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="hll"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dir</span><span class="w"></span>
</span><a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="hll"><span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/my-scripts</span><span class="w"></span>
</span><a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="hll"><span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0744</span><span class="w"> </span><span class="c1"># optional</span><span class="w"></span>
</span><a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="hll"><span class="w">        </span><span class="nt">entries</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo.sh</span><span class="w"></span>
</span><a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="hll"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span><span class="w"></span>
</span><a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="hll"><span class="w">              </span><span class="no">#!/bin/sh</span><span class="w"></span>
</span><a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="hll"><span class="w">              </span><span class="no">echo &quot;Hello world from foo!&quot;</span><span class="w"></span>
</span><a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar.sh</span><span class="w"></span>
</span><a id="__codelineno-19-16" name="__codelineno-19-16"></a><span class="hll"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span><span class="w"></span>
</span><a id="__codelineno-19-17" name="__codelineno-19-17"></a><span class="hll"><span class="w">              </span><span class="no">#!/bin/sh</span><span class="w"></span>
</span><a id="__codelineno-19-18" name="__codelineno-19-18"></a><span class="hll"><span class="w">              </span><span class="no">echo &quot;Hello world from bar!&quot;</span><span class="w"></span>
</span><a id="__codelineno-19-19" name="__codelineno-19-19"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<p>In this case, you can mount individual files from a ConfigMap, rather than a whole ConfigMap.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span>
<span class="normal"><a href="#__codelineno-20-15">15</a></span>
<span class="normal"><a href="#__codelineno-20-16">16</a></span>
<span class="normal"><a href="#__codelineno-20-17">17</a></span>
<span class="normal"><a href="#__codelineno-20-18">18</a></span>
<span class="normal"><a href="#__codelineno-20-19">19</a></span>
<span class="normal"><a href="#__codelineno-20-20">20</a></span>
<span class="normal"><a href="#__codelineno-20-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="hll"><span class="w">    </span><span class="nt">configs</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-ca</span><span class="w"></span>
</span><a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="hll"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file</span><span class="w"></span>
</span><a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="hll"><span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/my-scripts</span><span class="w"></span>
</span><a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="hll"><span class="w">        </span><span class="nt">defaultMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0744</span><span class="w"> </span><span class="c1"># optional</span><span class="w"></span>
</span><a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="hll"><span class="w">        </span><span class="nt">entries</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo-script</span><span class="w"></span>
</span><a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="hll"><span class="w">            </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo.sh</span><span class="w"></span>
</span><a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="hll"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span><span class="w"></span>
</span><a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="hll"><span class="w">              </span><span class="no">#!/bin/sh</span><span class="w"></span>
</span><a id="__codelineno-20-15" name="__codelineno-20-15"></a><span class="hll"><span class="w">              </span><span class="no">echo &quot;Hello world from foo!&quot;</span><span class="w"></span>
</span><a id="__codelineno-20-16" name="__codelineno-20-16"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar-script</span><span class="w"></span>
</span><a id="__codelineno-20-17" name="__codelineno-20-17"></a><span class="hll"><span class="w">            </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar.sh</span><span class="w"></span>
</span><a id="__codelineno-20-18" name="__codelineno-20-18"></a><span class="hll"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span><span class="w"></span>
</span><a id="__codelineno-20-19" name="__codelineno-20-19"></a><span class="hll"><span class="w">              </span><span class="no">#!/bin/sh</span><span class="w"></span>
</span><a id="__codelineno-20-20" name="__codelineno-20-20"></a><span class="hll"><span class="w">              </span><span class="no">echo &quot;Hello world from bar!&quot;</span><span class="w"></span>
</span><a id="__codelineno-20-21" name="__codelineno-20-21"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos generate config</strong></p>
</div>
<h4 id="from-existing-configmap-or-secret"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> From existing ConfigMap or Secret</h4>
<p>It is also possible to mount <code>Secrets</code> or <code>ConfigMaps</code> from external references inside your container POD's, rather than creating those objects along with your application deployments. This is useful if you need to decouple the lifecycle of your <code>Secrets</code> or <code>ConfigMaps</code> from your actual applications themselves. As an example, imagine a <code>Secret</code> that holds your application certificate data that is managed by <code>Cert-Manager</code>, those secrets might get updated in any point in time and your application deployment should in no way overwrite this <code>Secret</code> data on deployments. In this case, you will simply reference the target secret you wish to mount. Of course, those <code>Secrets</code> and/or <code>ConfigMaps</code> should exist upfront before you deploy your applications that make use of them. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Mount as directory</label><label for="__tabbed_5_2">Mount as files</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-21-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-21-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="hll"><span class="w">    </span><span class="nt">secrets</span><span class="p">:</span><span class="w"> </span><span class="c1"># or configs</span><span class="w"></span>
</span><a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-ca</span><span class="w"></span>
</span><a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="hll"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dir</span><span class="w"></span>
</span><a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="hll"><span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/x509/https</span><span class="w"></span>
</span><a id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="hll"><span class="w">        </span><span class="nt">ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-root-domain-tls-secret</span><span class="w"> </span><span class="c1"># existing secret / configMap name to reference</span><span class="w"></span>
</span><a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="hll"><span class="w">    </span><span class="nt">secrets</span><span class="p">:</span><span class="w"> </span><span class="c1"># or configs</span><span class="w"></span>
</span><a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-ca</span><span class="w"></span>
</span><a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="hll"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file</span><span class="w"></span>
</span><a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="hll"><span class="w">        </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/x509/https</span><span class="w"></span>
</span><a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="hll"><span class="w">        </span><span class="nt">ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-root-domain-tls-secret</span><span class="w"> </span><span class="c1"># existing secret / configMap name to reference</span><span class="w"></span>
</span><a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="hll"><span class="w">        </span><span class="nt">entries</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca-crt</span><span class="w"> </span><span class="c1"># name of the configMap / secret key that contains the value</span><span class="w"></span>
</span><a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="hll"><span class="w">            </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ca.crt</span><span class="w"> </span><span class="c1"># name of the file to use to mount this value as</span><span class="w"></span>
</span><a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos generate secret</strong> or <strong>mdos generate config</strong></p>
</div>
<hr />
<h3 id="environment-variables"><span class="twemoji section-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.47 4.97a.75.75 0 0 0 0 1.06L9.94 7.5 8.47 8.97a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06l-2-2a.75.75 0 0 0-1.06 0zM6.53 6.03a.75.75 0 0 0-1.06-1.06l-2 2a.75.75 0 0 0 0 1.06l2 2a.75.75 0 1 0 1.06-1.06L5.06 7.5l1.47-1.47z"/><path fill-rule="evenodd" d="M12.246 13.307a7.5 7.5 0 1 1 1.06-1.06l2.474 2.473a.75.75 0 1 1-1.06 1.06l-2.474-2.473zM1.5 7.5a6 6 0 1 1 10.386 4.094.75.75 0 0 0-.292.293A6 6 0 0 1 1.5 7.5z"/></svg></span> Environment Variables</h3>
<p>Environment variables are a core concept of almost any cloud application. They can also be content sensitive in some cases (ex. passwords, private keys...), in which case you should consider using Kubernetes <code>Secrets</code> rather than <code>ConfigMaps</code>, or directly coding those as environment variables in your deployment YAML files.</p>
<h4 id="using-configmaps-or-secrets"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> Using ConfigMaps or Secrets</h4>
<p>If all you need is to set environment variables for your application components, use the following example:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">As Secret</label><label for="__tabbed_6_2">As ConfigMap</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-23-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-23-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-23-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span>
<span class="normal"><a href="#__codelineno-23-11">11</a></span>
<span class="normal"><a href="#__codelineno-23-12">12</a></span>
<span class="normal"><a href="#__codelineno-23-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="hll"><span class="w">    </span><span class="nt">secrets</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">config-params</span><span class="w"></span>
</span><a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="hll"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env</span><span class="w"></span>
</span><a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="hll"><span class="w">        </span><span class="nt">entries</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MY_VAR_1</span><span class="w"></span>
</span><a id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="hll"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my</span><span class="nv"> </span><span class="s">vlaue&quot;</span><span class="w"></span>
</span><a id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MY_VAR_2</span><span class="w"></span>
</span><a id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="hll"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">vlaue&quot;</span><span class="w"></span>
</span><a id="__codelineno-23-13" name="__codelineno-23-13"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-24-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-24-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-24-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-24-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-24-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-24-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-24-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-24-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-24-10">10</a></span>
<span class="normal"><a href="#__codelineno-24-11">11</a></span>
<span class="normal"><a href="#__codelineno-24-12">12</a></span>
<span class="normal"><a href="#__codelineno-24-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="hll"><span class="w">    </span><span class="nt">configs</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">config-params</span><span class="w"></span>
</span><a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="hll"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env</span><span class="w"></span>
</span><a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="hll"><span class="w">        </span><span class="nt">entries</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MY_VAR_1</span><span class="w"></span>
</span><a id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="hll"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my</span><span class="nv"> </span><span class="s">vlaue&quot;</span><span class="w"></span>
</span><a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MY_VAR_2</span><span class="w"></span>
</span><a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="hll"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">vlaue&quot;</span><span class="w"></span>
</span><a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos generate secret</strong> or <strong>mdos generate config</strong></p>
</div>
<h4 id="from-existing-configmap-or-secret_1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> From existing ConfigMap or Secret</h4>
<p>It is also possible to reference <code>Secrets</code> or <code>ConfigMaps</code> from external references inside your container POD's, rather than creating those objects along with your application deployments.<br />
Of course, those <code>Secrets</code> and/or <code>ConfigMaps</code> should exist upfront before you deploy your applications that make use of them. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">From existing Secret</label><label for="__tabbed_7_2">From existing ConfigMap</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-25-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-25-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-25-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-25-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-25-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-25-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-25-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-25-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-25-10">10</a></span>
<span class="normal"><a href="#__codelineno-25-11">11</a></span>
<span class="normal"><a href="#__codelineno-25-12">12</a></span>
<span class="normal"><a href="#__codelineno-25-13">13</a></span>
<span class="normal"><a href="#__codelineno-25-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="hll"><span class="w">    </span><span class="nt">secrets</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rabbitmq-creds</span><span class="w"></span>
</span><a id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="hll"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env</span><span class="w"></span>
</span><a id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="hll"><span class="w">        </span><span class="nt">ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rabbitmq-cluster-default-user</span><span class="w"> </span><span class="c1"># existing secret / configMap name to reference</span><span class="w"></span>
</span><a id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="hll"><span class="w">        </span><span class="nt">entries</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RABBIT_PORT</span><span class="w"> </span><span class="c1"># variable name to set</span><span class="w"></span>
</span><a id="__codelineno-25-11" name="__codelineno-25-11"></a><span class="hll"><span class="w">            </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PORT</span><span class="w"> </span><span class="c1"># variable key name from the ref. secret / config</span><span class="w"></span>
</span><a id="__codelineno-25-12" name="__codelineno-25-12"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RABBIT_HOST</span><span class="w"></span>
</span><a id="__codelineno-25-13" name="__codelineno-25-13"></a><span class="hll"><span class="w">            </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HOST</span><span class="w"></span>
</span><a id="__codelineno-25-14" name="__codelineno-25-14"></a><span class="nn">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="hll"><span class="w">    </span><span class="nt">configs</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rabbitmq-creds</span><span class="w"></span>
</span><a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="hll"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env</span><span class="w"></span>
</span><a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="hll"><span class="w">        </span><span class="nt">ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rabbitmq-cluster-default-user</span><span class="w"> </span><span class="c1"># existing secret / configMap name to reference</span><span class="w"></span>
</span><a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="hll"><span class="w">        </span><span class="nt">entries</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RABBIT_PORT</span><span class="w"> </span><span class="c1"># variable name to set</span><span class="w"></span>
</span><a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="hll"><span class="w">            </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PORT</span><span class="w"> </span><span class="c1"># variable key name from the ref. secret / config</span><span class="w"></span>
</span><a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RABBIT_HOST</span><span class="w"></span>
</span><a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="hll"><span class="w">            </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HOST</span><span class="w"></span>
</span><a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="nn">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos generate secret</strong> or <strong>mdos generate config</strong></p>
</div>
<hr />
<h3 id="networking"><span class="twemoji section-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.47 4.97a.75.75 0 0 0 0 1.06L9.94 7.5 8.47 8.97a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06l-2-2a.75.75 0 0 0-1.06 0zM6.53 6.03a.75.75 0 0 0-1.06-1.06l-2 2a.75.75 0 0 0 0 1.06l2 2a.75.75 0 1 0 1.06-1.06L5.06 7.5l1.47-1.47z"/><path fill-rule="evenodd" d="M12.246 13.307a7.5 7.5 0 1 1 1.06-1.06l2.474 2.473a.75.75 0 1 1-1.06 1.06l-2.474-2.473zM1.5 7.5a6 6 0 1 1 10.386 4.094.75.75 0 0 0-.292.293A6 6 0 0 1 1.5 7.5z"/></svg></span> Networking</h3>
<h4 id="exposing-ports-using-services"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> Exposing ports using services</h4>
<p>Applications often expose services using a specific port(s). Remember, in Kubernetes, POD IP addresses are ephemeral. They change every time your POD is restarted. To allow applications to talk to your application services, you need a Kubernetes <code>Service</code> object to allow your application component to be auto-discoverable by other application components, hens the <code>Service</code> in Kubernetes.<br />
To create a service endpoint for your various ports, use the following syntax:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span>
<span class="normal"><a href="#__codelineno-27-4">4</a></span>
<span class="normal"><a href="#__codelineno-27-5">5</a></span>
<span class="normal"><a href="#__codelineno-27-6">6</a></span>
<span class="normal"><a href="#__codelineno-27-7">7</a></span>
<span class="normal"><a href="#__codelineno-27-8">8</a></span>
<span class="normal"><a href="#__codelineno-27-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="hll"><span class="w">    </span><span class="nt">services</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http-service</span><span class="w"></span>
</span><a id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="hll"><span class="w">        </span><span class="nt">ports</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="hll"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w"></span>
</span><a id="__codelineno-27-9" name="__codelineno-27-9"></a><span class="nn">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos generate service</strong></p>
</div>
<h4 id="configure-ingress"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> Configure Ingress</h4>
<p>By default, applications in Kubernetes are only reachable from other components that are also running inside your cluster. To make application component services accessible from outside your cluster, you will have to add an <code>ingress</code> to your application component, this will expose this service endpoint to the outside world using a host / domain name. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">MDos managed cluster</label><label for="__tabbed_8_2">MDos framework only</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="hll"><span class="w">    </span><span class="nt">ingress</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span><span class="w"></span>
</span><a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="hll"><span class="w">        </span><span class="nt">matchHost</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx.mydomain.com</span><span class="w"></span>
</span><a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="hll"><span class="w">        </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w"></span>
</span><a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="hll"><span class="w">        </span><span class="nt">trafficType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http</span><span class="w"></span>
</span><a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="nn">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<table>
<thead>
<tr>
<th><strong>"trafficType" possible values</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>http</td>
<td>The ingress will be configured to route traffic coming from port 80 to the port specified in <code>targetPort</code></td>
</tr>
<tr>
<td>https</td>
<td>The ingress will be configured to route traffic coming from port 443 to the port specified in <code>targetPort</code></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your <code>matchHost</code> value is a subdomain of your root MDos domain name configured during the platform installation and your traffic type is <code>https</code>, then nothing else is needed for ingress to work OOTB.<br />
Now if you would like to use a different host / domain name to respond to your traffic for this component ingress, then you will have to create a <code>ingress-gateway</code> object first using the command <code>mdos ingress-gateway create</code>. For more details, refer back to the chapter <a href="/mdos/advanced-resources/#managing-your-domain-specific-ingress-gateways">Managing your Domain specific Ingress-Gateways</a>.</p>
</div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="hll"><span class="w">    </span><span class="nt">ingress</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span><span class="w"></span>
</span><a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="hll"><span class="w">        </span><span class="nt">matchHost</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx.mydomain.com</span><span class="w"></span>
</span><a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="hll"><span class="w">        </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w"></span>
</span><a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="hll"><span class="w">        </span><span class="nt">trafficType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTTPS_SIMPLE</span><span class="w"></span>
</span><a id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="hll"><span class="w">        </span><span class="nt">tlsSecretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myTlsSecret</span><span class="w"></span>
</span><a id="__codelineno-29-11" name="__codelineno-29-11"></a>
<a id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="nn">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<table>
<thead>
<tr>
<th><strong>"trafficType" possible values</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>HTTP</td>
<td>The ingress will be configured to route traffic coming from port 80 to the port specified in <code>targetPort</code></td>
</tr>
<tr>
<td>HTTPS_SIMPLE</td>
<td>The ingress will be configured to route traffic coming from port 443 and terminate the TLS connection before routing the traffic to the port specified in <code>targetPort</code>. If set, a secret reference name holding the TLS certificate details (crt &amp; key) needs to be provided as well</td>
</tr>
<tr>
<td>HTTPS_PASSTHROUGH</td>
<td>The ingress will be configured to route traffic coming from port 443 to the port specified in <code>targetPort</code> as is, the application will need to listen for incoming HTTPS traffic and terminate the TLS connection there</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos ingress-gateway create</strong><br />
<strong>mdos generate ingress</strong></p>
</div>
<h4 id="networkpolicy"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> NetworkPolicy</h4>
<p>On a multi-tenant cluster environement, it is important that you protect your components from being accessed from other application components. There are 4 available configuration settings available for you to use:</p>
<table>
<thead>
<tr>
<th><strong>Scope</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>private</td>
<td>No one can talk to this component</td>
</tr>
<tr>
<td>limited</td>
<td>Only components belonging to this application can talk to this component</td>
</tr>
<tr>
<td>open</td>
<td>All application components in this tenant namespace can talk to this component</td>
</tr>
<tr>
<td>custom</td>
<td>You can specify which components in what namespaces can talk to this component</td>
</tr>
</tbody>
</table>
<p>This is how you configure this on your component:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span>
<span class="normal"><a href="#__codelineno-30-2">2</a></span>
<span class="normal"><a href="#__codelineno-30-3">3</a></span>
<span class="normal"><a href="#__codelineno-30-4">4</a></span>
<span class="normal"><a href="#__codelineno-30-5">5</a></span>
<span class="normal"><a href="#__codelineno-30-6">6</a></span>
<span class="normal"><a href="#__codelineno-30-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="hll"><span class="w">    </span><span class="nt">networkPolicy</span><span class="p">:</span><span class="w"> </span>
</span><a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="hll"><span class="w">      </span><span class="nt">scope</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">private</span><span class="w"> </span><span class="c1"># limited | open | custom</span><span class="w"></span>
</span><a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>The <code>custom</code> scope let's you specify specifically what application components from what namespaces are allowed to communicate with this component.  </p>
<p>Here is a more complex example that uses a <code>custom</code> scoped NetworkPolicy (please note the addition of the <code>allow</code> array value in this case):  </p>
<p><img src="/mdos/img/networkPolicies/custom.png" alt="custom" width="800"/></p>
<hr />
<h3 id="component-dependencies"><span class="twemoji section-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.47 4.97a.75.75 0 0 0 0 1.06L9.94 7.5 8.47 8.97a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06l-2-2a.75.75 0 0 0-1.06 0zM6.53 6.03a.75.75 0 0 0-1.06-1.06l-2 2a.75.75 0 0 0 0 1.06l2 2a.75.75 0 1 0 1.06-1.06L5.06 7.5l1.47-1.47z"/><path fill-rule="evenodd" d="M12.246 13.307a7.5 7.5 0 1 1 1.06-1.06l2.474 2.473a.75.75 0 1 1-1.06 1.06l-2.474-2.473zM1.5 7.5a6 6 0 1 1 10.386 4.094.75.75 0 0 0-.292.293A6 6 0 0 1 1.5 7.5z"/></svg></span> Component dependencies</h3>
<p>If your component has a strong dependency with one or more of your application components, and it should wait until those components are up and running before starting this component, then use the flag <code>dependsOn</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span>
<span class="normal"><a href="#__codelineno-31-3">3</a></span>
<span class="normal"><a href="#__codelineno-31-4">4</a></span>
<span class="normal"><a href="#__codelineno-31-5">5</a></span>
<span class="normal"><a href="#__codelineno-31-6">6</a></span>
<span class="normal"><a href="#__codelineno-31-7">7</a></span>
<span class="normal"><a href="#__codelineno-31-8">8</a></span>
<span class="normal"><a href="#__codelineno-31-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span><span class="w"></span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="hll"><span class="w">    </span><span class="nt">dependsOn</span><span class="p">:</span><span class="w"> </span>
</span><a id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span><span class="w"></span>
</span><a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>This will provision a <code>initContainer</code> that will monitor your other components, effectively delaying it's start up until those conditions are met.</p>
<hr />
<h3 id="oauth2-oidc"><span class="twemoji section-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.47 4.97a.75.75 0 0 0 0 1.06L9.94 7.5 8.47 8.97a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06l-2-2a.75.75 0 0 0-1.06 0zM6.53 6.03a.75.75 0 0 0-1.06-1.06l-2 2a.75.75 0 0 0 0 1.06l2 2a.75.75 0 1 0 1.06-1.06L5.06 7.5l1.47-1.47z"/><path fill-rule="evenodd" d="M12.246 13.307a7.5 7.5 0 1 1 1.06-1.06l2.474 2.473a.75.75 0 1 1-1.06 1.06l-2.474-2.473zM1.5 7.5a6 6 0 1 1 10.386 4.094.75.75 0 0 0-.292.293A6 6 0 0 1 1.5 7.5z"/></svg></span> OAuth2 OIDC</h3>
<div class="admonition error">
<p class="admonition-title">Please note</p>
<p>Only applicable for <code>MDos managed cluster</code> deployments</p>
</div>
<p>You can protect your applications using OAuth2 OIDC without having to write a single line of code or modify your applications in any way. You have the option of a variaty of OIDC providers such as Keycloak, Google, GitHub and others.</p>
<p>To find out how to configure and add your OIDC providers, please refer to the chapter <a href="/mdos/advanced-resources/#securing-applications-using-oidc-providers">Securing applications using OIDC providers</a> for more information.</p>
<h4 id="protect-your-ingress-with-a-oidc-provider"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 16.94v-4H5.08l-.03-2.01H14V6.94l5 5Z"/></svg></span> Protect your ingress with a OIDC provider</h4>
<p>To add OIDC authentication to one of your application configurations, simply specify which OIDC provider you want to enforce, and what hostname that was configured in your ingres section you want to be protected.</p>
<p>There are numerous OOTB providers that you can configure, but the most flexible and customizable is the integrated <code>Keycloak</code> OIDC provider. It will allow you to create any role according to your needs, assign them to your users and gain access to those roles from your authenticated user sessions encoded in the JWT token. Simply use those roles within your applications to then determine fine grained ACL rules you wish to enforce.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For an example using the Keycloak OIDC authentication provider with custom roles and ACL, please refer to the chapter <a href="/mdos/advanced-resources/#securing-applications-using-oidc-providers">Securing applications using OIDC providers</a></p>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span>
<span class="normal"><a href="#__codelineno-32-2">2</a></span>
<span class="normal"><a href="#__codelineno-32-3">3</a></span>
<span class="normal"><a href="#__codelineno-32-4">4</a></span>
<span class="normal"><a href="#__codelineno-32-5">5</a></span>
<span class="normal"><a href="#__codelineno-32-6">6</a></span>
<span class="normal"><a href="#__codelineno-32-7">7</a></span>
<span class="normal"><a href="#__codelineno-32-8">8</a></span>
<span class="normal"><a href="#__codelineno-32-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="hll"><span class="w">    </span><span class="nt">oidc</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="hll"><span class="w">      </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">google-test-provider</span><span class="w"></span>
</span><a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="hll"><span class="w">      </span><span class="nt">hosts</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="hll"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx.mydomain.com</span><span class="w"></span>
</span><a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="nn">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">CLI command</p>
<p><strong>mdos application protect</strong></p>
</div>
<hr />
<h3 id="set-pod-resources"><span class="twemoji section-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.47 4.97a.75.75 0 0 0 0 1.06L9.94 7.5 8.47 8.97a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06l-2-2a.75.75 0 0 0-1.06 0zM6.53 6.03a.75.75 0 0 0-1.06-1.06l-2 2a.75.75 0 0 0 0 1.06l2 2a.75.75 0 1 0 1.06-1.06L5.06 7.5l1.47-1.47z"/><path fill-rule="evenodd" d="M12.246 13.307a7.5 7.5 0 1 1 1.06-1.06l2.474 2.473a.75.75 0 1 1-1.06 1.06l-2.474-2.473zM1.5 7.5a6 6 0 1 1 10.386 4.094.75.75 0 0 0-.292.293A6 6 0 0 1 1.5 7.5z"/></svg></span> Set pod resources</h3>
<p>This allows you to impose limits in terms of CPU / memory resources you application components can use. </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-33-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-33-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-33-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-33-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-33-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span>
<span class="normal"><a href="#__codelineno-33-11">11</a></span>
<span class="normal"><a href="#__codelineno-33-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="hll"><span class="w">    </span><span class="nt">resources</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="hll"><span class="w">      </span><span class="nt">requests</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="hll"><span class="w">        </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;64Mi&quot;</span><span class="w"></span>
</span><a id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="hll"><span class="w">        </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;250m&quot;</span><span class="w"></span>
</span><a id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="hll"><span class="w">      </span><span class="nt">limits</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="hll"><span class="w">        </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;128Mi&quot;</span><span class="w"></span>
</span><a id="__codelineno-33-11" name="__codelineno-33-11"></a><span class="hll"><span class="w">        </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500m&quot;</span><span class="w"></span>
</span><a id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="nn">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<hr />
<h3 id="execute-pre-build-commands"><span class="twemoji section-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.47 4.97a.75.75 0 0 0 0 1.06L9.94 7.5 8.47 8.97a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06l-2-2a.75.75 0 0 0-1.06 0zM6.53 6.03a.75.75 0 0 0-1.06-1.06l-2 2a.75.75 0 0 0 0 1.06l2 2a.75.75 0 1 0 1.06-1.06L5.06 7.5l1.47-1.47z"/><path fill-rule="evenodd" d="M12.246 13.307a7.5 7.5 0 1 1 1.06-1.06l2.474 2.473a.75.75 0 1 1-1.06 1.06l-2.474-2.473zM1.5 7.5a6 6 0 1 1 10.386 4.094.75.75 0 0 0-.292.293A6 6 0 0 1 1.5 7.5z"/></svg></span> Execute pre-build commands</h3>
<p>MDos allows you to execute commands on the local machine every time you are about to deploy your application onto your Kubernetes cluster. Simply list the commands you wish to execute, and they will execute every time you run the command <code>mdos application deploy</code>.<br />
In this example, we are building a <code>mkdocs</code> project, then copy the resulting files over to the proper <code>volumes</code> directory ready for deployment</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span>
<span class="normal"><a href="#__codelineno-34-3">3</a></span>
<span class="normal"><a href="#__codelineno-34-4">4</a></span>
<span class="normal"><a href="#__codelineno-34-5">5</a></span>
<span class="normal"><a href="#__codelineno-34-6">6</a></span>
<span class="normal"><a href="#__codelineno-34-7">7</a></span>
<span class="normal"><a href="#__codelineno-34-8">8</a></span>
<span class="normal"><a href="#__codelineno-34-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="nt">components</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp-1</span><span class="w"></span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="hll"><span class="w">    </span><span class="nt">preBuildCmd</span><span class="p">:</span><span class="w"></span>
</span><a id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mkdocs build</span><span class="w"></span>
</span><a id="__codelineno-34-7" name="__codelineno-34-7"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rm -rf ../volumes/docs/*</span><span class="w"></span>
</span><a id="__codelineno-34-8" name="__codelineno-34-8"></a><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cp -r ./site/* ../volumes/docs</span><span class="w"></span>
</span><a id="__codelineno-34-9" name="__codelineno-34-9"></a><span class="nn">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>



  



                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../getting-started/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Getting Started" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Getting Started
            </div>
          </div>
        </a>
      
      
        
        <a href="../advanced-resources/" class="md-footer__link md-footer__link--next" aria-label="Next: Advanced Resources" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Advanced Resources
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tabs.sticky", "content.code.annotate"], "search": "../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>